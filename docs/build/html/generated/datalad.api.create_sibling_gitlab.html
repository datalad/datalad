<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>datalad.api.create_sibling_gitlab &mdash; DataLad 0.15.3+529.gc81453444.dirty documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datalad.api.create_sibling_gogs" href="datalad.api.create_sibling_gogs.html" />
    <link rel="prev" title="datalad.api.create_sibling_github" href="datalad.api.create_sibling_github.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> DataLad
            <img src="../_static/datalad_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.15
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background and motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../related.html">Delineation from related solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Basic principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credentials.html">Credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customization and extension of functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cmdline.html">Command line reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modref.html">Python module reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modref.html#high-level-user-interface">High-level user interface</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../modref.html#dataset-operations">Dataset operations</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datalad.api.Dataset.html">datalad.api.Dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create.html">datalad.api.create</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling.html">datalad.api.create_sibling</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_github.html">datalad.api.create_sibling_github</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">datalad.api.create_sibling_gitlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gogs.html">datalad.api.create_sibling_gogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gitea.html">datalad.api.create_sibling_gitea</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gin.html">datalad.api.create_sibling_gin</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.drop.html">datalad.api.drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.get.html">datalad.api.get</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.install.html">datalad.api.install</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.push.html">datalad.api.push</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.remove.html">datalad.api.remove</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.save.html">datalad.api.save</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.update.html">datalad.api.update</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.unlock.html">datalad.api.unlock</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#metadata-handling">Metadata handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#reproducible-execution">Reproducible execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#plumbing-commands">Plumbing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#miscellaneous-commands">Miscellaneous commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#support-functionality">Support functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#configuration-management">Configuration management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#test-infrastructure">Test infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#command-line-interface-infrastructure">Command line interface infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DataLad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../modref.html">Python module reference</a> &raquo;</li>
      <li>datalad.api.create_sibling_gitlab</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="datalad-api-create-sibling-gitlab">
<h1>datalad.api.create_sibling_gitlab<a class="headerlink" href="#datalad-api-create-sibling-gitlab" title="Permalink to this headline"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="datalad.api.create_sibling_gitlab">
<span class="sig-prename descclassname"><span class="pre">datalad.api.</span></span><span class="sig-name descname"><span class="pre">create_sibling_gitlab</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">site</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursion_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">existing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'error'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">access</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">publish_depends</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#datalad.api.create_sibling_gitlab" title="Permalink to this definition"></a></dt>
<dd><p>Create dataset sibling at a GitLab site</p>
<p>An existing GitLab project, or a project created via the GitLab web
interface can be configured as a sibling with the <strong class="command">siblings</strong>
command. Alternatively, this command can create a GitLab project at any
location/path a given user has appropriate permissions for. This is
particularly helpful for recursive sibling creation for subdatasets. API
access and authentication are implemented via python-gitlab, and all its
features are supported. A particular GitLab site must be configured in a
named section of a python-gitlab.cfg file (see
<a class="reference external" href="https://python-gitlab.readthedocs.io/en/stable/cli.html#configuration">https://python-gitlab.readthedocs.io/en/stable/cli.html#configuration</a> for
details), such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mygit</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">git</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">api_version</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">private_token</span> <span class="o">=</span> <span class="n">abcdefghijklmnopqrst</span>
</pre></div>
</div>
<p>Subsequently, this site is identified by its name (‘mygit’ in the example
above).</p>
<p>(Recursive) sibling creation for all, or a selected subset of subdatasets
is supported with three different project layouts (see –layout):</p>
<dl class="simple">
<dt>“hierarchy”</dt><dd><p>Each dataset is placed into its own group, and the actual GitLab
project for a dataset is put in a project named “_repo_” inside
this group. Using this layout, arbitrarily deep hierarchies of
nested datasets can be represented, while the hierarchical structure
is reflected in the project path. This is the default layout, if
no project path is specified.</p>
</dd>
<dt>“flat”</dt><dd><p>All datasets are placed in the same group. The name of a project
is its relative path within the root dataset, with all path separator
characters replaced by ‘–‘.</p>
</dd>
<dt>“collection”</dt><dd><p>This is a hybrid layout, where the root dataset is placed in a “_repo_”
project inside a group, and all nested subdatasets are represented
inside the group using a “flat” layout.</p>
</dd>
</dl>
<p>GitLab cannot host dataset content. However, in combination with
other data sources (and siblings), publishing a dataset to GitLab can
facilitate distribution and exchange, while still allowing any dataset
consumer to obtain actual data content from alternative sources.</p>
<p><em>Configuration</em></p>
<p>All configuration switches and options for GitLab sibling creation can
be provided arguments to the command. However, it is also possible to
specify a particular setup in a dataset’s configuration. This is
particularly important when managing large collections of datasets.
Configuration options are:</p>
<dl class="simple">
<dt>“datalad.gitlab-default-site”</dt><dd><p>Name of the default GitLab site (see –site)</p>
</dd>
<dt>“datalad.gitlab-SITENAME-siblingname”</dt><dd><p>Name of the sibling configured for the local dataset that points
to the GitLab instance SITENAME (see –name)</p>
</dd>
<dt>“datalad.gitlab-SITENAME-layout”</dt><dd><p>Project layout used at the GitLab instance SITENAME (see –layout)</p>
</dd>
<dt>“datalad.gitlab-SITENAME-access”</dt><dd><p>Access method used for the GitLab instance SITENAME (see –access)</p>
</dd>
<dt>“datalad.gitlab-SITENAME-project”</dt><dd><p>Project location/path used for a datasets at GitLab instance
SITENAME (see –project). Configuring this is useful for deriving
project paths for subdatasets, relative to superdataset.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – selectively create siblings for any datasets underneath a given
path. By default only the root dataset is considered. [Default:
None]</p></li>
<li><p><strong>site</strong> (<em>None</em><em> or </em><em>str</em><em>, </em><em>optional</em>) – name of the GitLab site to create a sibling at. Must match an
existing python-gitlab configuration section with location and
authentication settings (see <a class="reference external" href="https://python">https://python</a>-
gitlab.readthedocs.io/en/stable/cli-usage.html#configuration). By
default the dataset configuration is consulted. [Default: None]</p></li>
<li><p><strong>project</strong> (<em>None</em><em> or </em><em>str</em><em>, </em><em>optional</em>) – project name/location at the GitLab site. If a subdataset of the
reference dataset is processed, its project path is automatically
determined by the <cite>layout</cite> configuration, by default. [Default:
None]</p></li>
<li><p><strong>layout</strong> (<em>{None</em><em>, </em><em>'hierarchy'</em><em>, </em><em>'collection'</em><em>, </em><em>'flat'}</em><em>, </em><em>optional</em>) – layout of projects at the GitLab site, if a collection, or a
hierarchy of datasets and subdatasets is to be created. By default
the dataset configuration is consulted. [Default: None]</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="datalad.api.Dataset.html#datalad.api.Dataset" title="datalad.api.Dataset"><em>Dataset</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – reference or root dataset. If no path constraints are given, a
sibling for this dataset will be created. In this and all other
cases, the reference dataset is also consulted for the GitLab
configuration, and desired project layout. If no dataset is given,
an attempt is made to identify the dataset based on the current
working directory. [Default: None]</p></li>
<li><p><strong>recursive</strong> (<em>bool</em><em>, </em><em>optional</em>) – if set, recurse into potential subdatasets. [Default: False]</p></li>
<li><p><strong>recursion_limit</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – limit recursion into subdatasets to the given number of levels.
[Default: None]</p></li>
<li><p><strong>name</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – name to represent the GitLab sibling remote in the local dataset
installation. If not specified a name is looked up in the dataset
configuration, or defaults to the <cite>site</cite> name. [Default: None]</p></li>
<li><p><strong>existing</strong> (<em>{'skip'</em><em>, </em><em>'error'</em><em>, </em><em>'reconfigure'}</em><em>, </em><em>optional</em>) – desired behavior when already existing or configured siblings are
discovered. ‘skip’: ignore; ‘error’: fail, if access URLs differ;
‘reconfigure’: use the existing repository and reconfigure the local
dataset to use it as a sibling. [Default: ‘error’]</p></li>
<li><p><strong>access</strong> (<em>{None</em><em>, </em><em>'http'</em><em>, </em><em>'ssh'</em><em>, </em><em>'ssh+http'}</em><em>, </em><em>optional</em>) – access method used for data transfer to and from the sibling. ‘ssh’:
read and write access used the SSH protocol; ‘http’: read and write
access use HTTP requests; ‘ssh+http’: read access is done via HTTP
and write access performed with SSH. Dataset configuration is
consulted for a default, ‘http’ is used otherwise. [Default: None]</p></li>
<li><p><strong>publish_depends</strong> (<em>list of str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – add a dependency such that the given existing sibling is always
published prior to the new sibling. This equals setting a
configuration item ‘remote.SIBLINGNAME.datalad-publish-depends’.
Multiple dependencies can be given as a list of sibling names.
[Default: None]</p></li>
<li><p><strong>description</strong> (<em>str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – brief description for the GitLab project (displayed on the site).
[Default: None]</p></li>
<li><p><strong>dryrun</strong> (<em>bool</em><em>, </em><em>optional</em>) – Deprecated. Use the renamed <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> parameter. [Default: False]</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em><em>, </em><em>optional</em>) – if set, no repository will be created, only tests for name
collisions will be performed, and would-be repository names are
reported for all relevant datasets. [Default: False]</p></li>
<li><p><strong>on_failure</strong> (<em>{'ignore'</em><em>, </em><em>'continue'</em><em>, </em><em>'stop'}</em><em>, </em><em>optional</em>) – behavior to perform on failure: ‘ignore’ any failure is reported,
but does not cause an exception; ‘continue’ if any failure occurs an
exception will be raised at the end, but processing other actions
will continue for as long as possible; ‘stop’: processing will stop
on first failure and an exception is raised. A failure is any result
with status ‘impossible’ or ‘error’. Raised exception is an
IncompleteResultsError that carries the result dictionaries of the
failures in its <cite>failed</cite> attribute. [Default: ‘continue’]</p></li>
<li><p><strong>result_filter</strong> (<em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned status dictionary is passed to this
callable, and is only returned if the callable’s return value does
not evaluate to False or a ValueError exception is raised. If the
given callable supports <cite>**kwargs</cite> it will additionally be passed
the keyword arguments of the original API call. [Default: None]</p></li>
<li><p><strong>result_renderer</strong> – select rendering mode command results. ‘tailored’ enables a command-
specific rendering style that is typically tailored to human
consumption, if there is one for a specific command, or otherwise
falls back on the the ‘generic’ result renderer; ‘generic’ renders
each result in one line  with key info like action, status, path,
and an optional message); ‘json’ a complete JSON line serialization
of the full result record; ‘json_pp’ like ‘json’, but pretty-printed
spanning multiple lines; ‘disabled’ turns off result rendering
entirely; ‘&lt;template&gt;’ reports any value(s) of any result properties
in any format indicated by the template (e.g. ‘{path}’, compare with
JSON output for all key-value choices). The template syntax follows
the Python “format() language”. It is possible to report individual
dictionary values, e.g. ‘{metadata[name]}’. If a 2nd-level key
contains a colon, e.g. ‘music:Genre’, ‘:’ must be substituted by ‘#’
in the template, like so: ‘{metadata[music#Genre]}’. [Default:
‘tailored’]</p></li>
<li><p><strong>result_xfm</strong> (<em>{'datasets'</em><em>, </em><em>'successdatasets-or-none'</em><em>, </em><em>'paths'</em><em>, </em><em>'relpaths'</em><em>, </em><em>'metadata'}</em><em> or </em><em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned result status dictionary is passed to
this callable, and its return value becomes the result instead. This
is different from <cite>result_filter</cite>, as it can perform arbitrary
transformation of the result value. This is mostly useful for top-
level command invocations that need to provide the results in a
particular format. Instead of a callable, a label for a pre-crafted
result transformation can be given. [Default: None]</p></li>
<li><p><strong>return_type</strong> (<em>{'generator'</em><em>, </em><em>'list'</em><em>, </em><em>'item-or-list'}</em><em>, </em><em>optional</em>) – return value behavior switch. If ‘item-or-list’ a single value is
returned instead of a one-item return value list, or a list in case
of multiple return values. <cite>None</cite> is return in case of an empty
list. [Default: ‘list’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datalad.api.create_sibling_github.html" class="btn btn-neutral float-left" title="datalad.api.create_sibling_github" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datalad.api.create_sibling_gogs.html" class="btn btn-neutral float-right" title="datalad.api.create_sibling_gogs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, DataLad team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>