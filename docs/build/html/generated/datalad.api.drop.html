<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>datalad.api.drop &mdash; DataLad 0.15.3+529.gc81453444.dirty documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="datalad.api.get" href="datalad.api.get.html" />
    <link rel="prev" title="datalad.api.create_sibling_gin" href="datalad.api.create_sibling_gin.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> DataLad
            <img src="../_static/datalad_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.15
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background and motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../related.html">Delineation from related solutions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">Basic principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credentials.html">Credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metadata.html">Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization.html">Customization and extension of functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cmdline.html">Command line reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../modref.html">Python module reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../modref.html#high-level-user-interface">High-level user interface</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../modref.html#dataset-operations">Dataset operations</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="datalad.api.Dataset.html">datalad.api.Dataset</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create.html">datalad.api.create</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling.html">datalad.api.create_sibling</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_github.html">datalad.api.create_sibling_github</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gitlab.html">datalad.api.create_sibling_gitlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gogs.html">datalad.api.create_sibling_gogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gitea.html">datalad.api.create_sibling_gitea</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.create_sibling_gin.html">datalad.api.create_sibling_gin</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">datalad.api.drop</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.get.html">datalad.api.get</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.install.html">datalad.api.install</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.push.html">datalad.api.push</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.remove.html">datalad.api.remove</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.save.html">datalad.api.save</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.update.html">datalad.api.update</a></li>
<li class="toctree-l4"><a class="reference internal" href="datalad.api.unlock.html">datalad.api.unlock</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#metadata-handling">Metadata handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#reproducible-execution">Reproducible execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#plumbing-commands">Plumbing commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modref.html#miscellaneous-commands">Miscellaneous commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#support-functionality">Support functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#configuration-management">Configuration management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#test-infrastructure">Test infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modref.html#command-line-interface-infrastructure">Command line interface infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../config.html">Configuration</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DataLad</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../modref.html">Python module reference</a> &raquo;</li>
      <li>datalad.api.drop</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="datalad-api-drop">
<h1>datalad.api.drop<a class="headerlink" href="#datalad-api-drop" title="Permalink to this headline"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="datalad.api.drop">
<span class="sig-prename descclassname"><span class="pre">datalad.api.</span></span><span class="sig-name descname"><span class="pre">drop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">what</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'filecontent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reckless</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursion_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_dirty</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#datalad.api.drop" title="Permalink to this definition"></a></dt>
<dd><p>Drop content of individual files or entire (sub)datasets</p>
<p>This command is the antagonist of ‘get’. It can undo the retrieval of file
content, and the installation of subdatasets.</p>
<p>Dropping is a safe-by-default operation. Before dropping any information,
the command confirms the continued availability of file-content (see e.g.,
configuration ‘annex.numcopies’), and the state of all dataset branches
from at least one known dataset sibling. Moreover, prior removal of an
entire dataset annex, that it is confirmed that it is no longer marked
as existing in the network of dataset siblings.</p>
<p>Importantly, all checks regarding version history availability and local
annex availability are performed using the current state of remote
siblings as known to the local dataset. This is done for performance
reasons and for resilience in case of absent network connectivity. To
ensure decision making based on up-to-date information, it is advised to
execute a dataset update before dropping dataset components.</p>
<p class="rubric">Examples</p>
<p>Drop single file content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">drop</span><span class="p">(</span><span class="s1">&#39;path/to/file&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Drop all file content in the current dataset:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">drop</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Drop all file content in a dataset and all its subdatasets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">drop</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Disable check to ensure the configured minimum number of remote
sources for dropped data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">drop</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;path/to/content&#39;</span><span class="p">,</span> <span class="n">reckless</span><span class="o">=</span><span class="s1">&#39;availability&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Drop (uninstall) an entire dataset (will fail with subdatasets
present):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">drop</span><span class="p">(</span><span class="n">what</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Kill a dataset recklessly with any existing subdatasets too(this will
be fast, but will disable any and all safety checks):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">drop</span><span class="p">(</span><span class="n">what</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">reckless</span><span class="o">=</span><span class="s1">&#39;kill&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>sequence of str</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – path of a dataset or dataset component to be dropped. [Default:
None]</p></li>
<li><p><strong>what</strong> (<em>{'filecontent'</em><em>, </em><em>'allkeys'</em><em>, </em><em>'datasets'</em><em>, </em><em>'all'}</em><em>, </em><em>optional</em>) – select what type of items shall be dropped. With ‘filecontent’, only
the file content (git-annex keys) of files in a dataset’s worktree
will be dropped. With ‘allkeys’, content of any version of any file
in any branch (including, but not limited to the worktree) will be
dropped. This effectively empties the annex of a local dataset. With
‘datasets’, only complete datasets will be dropped (implies
‘allkeys’ mode for each such dataset), but no filecontent will be
dropped for any files in datasets that are not dropped entirely.
With ‘all’, content for any matching file or dataset will be dropped
entirely. [Default: ‘filecontent’]</p></li>
<li><p><strong>reckless</strong> (<em>{'modification'</em><em>, </em><em>'availability'</em><em>, </em><em>'undead'</em><em>, </em><em>'kill'</em><em>, </em><em>None}</em><em>, </em><em>optional</em>) – disable individual or all data safety measures that would normally
prevent potentially irreversible data-loss. With ‘modification’,
unsaved modifications in a dataset will not be detected. This
improves performance at the cost of permitting potential loss of
unsaved or untracked dataset components. With ‘availability’,
detection of dataset/branch-states that are only available in the
local dataset, and detection of an insufficient number of file-
content copies will be disabled. Especially the latter is a
potentially expensive check which might involve numerous network
transactions. With ‘undead’, detection of whether a to-be-removed
local annex is still known to exist in the network of dataset-clones
is disabled. This could cause zombie-records of invalid file
availability. With ‘kill’, all safety-checks are disabled. [Default:
None]</p></li>
<li><p><strong>dataset</strong> (<a class="reference internal" href="datalad.api.Dataset.html#datalad.api.Dataset" title="datalad.api.Dataset"><em>Dataset</em></a><em> or </em><em>None</em><em>, </em><em>optional</em>) – specify the dataset to perform drop from. If no dataset is given,
the current working directory is used as operation context.
[Default: None]</p></li>
<li><p><strong>recursive</strong> (<em>bool</em><em>, </em><em>optional</em>) – if set, recurse into potential subdatasets. [Default: False]</p></li>
<li><p><strong>recursion_limit</strong> (<em>int</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – limit recursion into subdatasets to the given number of levels.
[Default: None]</p></li>
<li><p><strong>jobs</strong> (<em>int</em><em> or </em><em>None</em><em> or </em><em>{'auto'}</em><em>, </em><em>optional</em>) – how many parallel jobs (where possible) to use. “auto” corresponds
to the number defined by ‘datalad.runtime.max-annex-jobs’
configuration item        NOTE: This option can only parallelize
input retrieval (get) and output recording (save). DataLad does NOT
parallelize your scripts for you. [Default: None]</p></li>
<li><p><strong>check</strong> (<em>bool</em><em>, </em><em>optional</em>) – DEPRECATED: use ‘–reckless availability’. [Default: None]</p></li>
<li><p><strong>if_dirty</strong> – DEPRECATED and IGNORED: use –reckless instead. [Default: None]</p></li>
<li><p><strong>on_failure</strong> (<em>{'ignore'</em><em>, </em><em>'continue'</em><em>, </em><em>'stop'}</em><em>, </em><em>optional</em>) – behavior to perform on failure: ‘ignore’ any failure is reported,
but does not cause an exception; ‘continue’ if any failure occurs an
exception will be raised at the end, but processing other actions
will continue for as long as possible; ‘stop’: processing will stop
on first failure and an exception is raised. A failure is any result
with status ‘impossible’ or ‘error’. Raised exception is an
IncompleteResultsError that carries the result dictionaries of the
failures in its <cite>failed</cite> attribute. [Default: ‘continue’]</p></li>
<li><p><strong>result_filter</strong> (<em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned status dictionary is passed to this
callable, and is only returned if the callable’s return value does
not evaluate to False or a ValueError exception is raised. If the
given callable supports <cite>**kwargs</cite> it will additionally be passed
the keyword arguments of the original API call. [Default: None]</p></li>
<li><p><strong>result_renderer</strong> – select rendering mode command results. ‘tailored’ enables a command-
specific rendering style that is typically tailored to human
consumption, if there is one for a specific command, or otherwise
falls back on the the ‘generic’ result renderer; ‘generic’ renders
each result in one line  with key info like action, status, path,
and an optional message); ‘json’ a complete JSON line serialization
of the full result record; ‘json_pp’ like ‘json’, but pretty-printed
spanning multiple lines; ‘disabled’ turns off result rendering
entirely; ‘&lt;template&gt;’ reports any value(s) of any result properties
in any format indicated by the template (e.g. ‘{path}’, compare with
JSON output for all key-value choices). The template syntax follows
the Python “format() language”. It is possible to report individual
dictionary values, e.g. ‘{metadata[name]}’. If a 2nd-level key
contains a colon, e.g. ‘music:Genre’, ‘:’ must be substituted by ‘#’
in the template, like so: ‘{metadata[music#Genre]}’. [Default:
‘tailored’]</p></li>
<li><p><strong>result_xfm</strong> (<em>{'datasets'</em><em>, </em><em>'successdatasets-or-none'</em><em>, </em><em>'paths'</em><em>, </em><em>'relpaths'</em><em>, </em><em>'metadata'}</em><em> or </em><em>callable</em><em> or </em><em>None</em><em>, </em><em>optional</em>) – if given, each to-be-returned result status dictionary is passed to
this callable, and its return value becomes the result instead. This
is different from <cite>result_filter</cite>, as it can perform arbitrary
transformation of the result value. This is mostly useful for top-
level command invocations that need to provide the results in a
particular format. Instead of a callable, a label for a pre-crafted
result transformation can be given. [Default: None]</p></li>
<li><p><strong>return_type</strong> (<em>{'generator'</em><em>, </em><em>'list'</em><em>, </em><em>'item-or-list'}</em><em>, </em><em>optional</em>) – return value behavior switch. If ‘item-or-list’ a single value is
returned instead of a one-item return value list, or a list in case
of multiple return values. <cite>None</cite> is return in case of an empty
list. [Default: ‘list’]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datalad.api.create_sibling_gin.html" class="btn btn-neutral float-left" title="datalad.api.create_sibling_gin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="datalad.api.get.html" class="btn btn-neutral float-right" title="datalad.api.get" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, DataLad team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>